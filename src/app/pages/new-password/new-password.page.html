<app-toolbar *ngIf="isLogin"></app-toolbar>
<app-toolbar-with-back
  *ngIf="!isLogin"
  backUrl="/login"
></app-toolbar-with-bac>

<ion-content force-overscroll="false"  class="gaea21home"  *ngIf="!passwordReinitialization, else newPasswordDone"   >
  
  <ion-grid>
    <!-- Logo répertoire vert-->
         <ion-row *ngIf="!isLogin" class="logo-row ion-align-items-center">
                   <ion-col class="ion-text-center">
                           <ion-img src="../assets/imgs/logo_repertoire_vert_ok.png"></ion-img>
                   </ion-col>
         </ion-row>

  <ion-row class="gray-row">
            <ion-col size="12" class="ion-text-center label-column">
                  <ion-text *ngIf="!isLogin" translate="Réinitialisation de votre mot de passe"></ion-text>
            </ion-col>
<form 
        #newPassword="ngForm"
        (onSubmit)="newPassewordEmailForm.valid && submitForm"
        [formGroup]="newPassewordEmailForm"
      >
             <ion-col size="12">
                          <ion-item>
                                  <ion-label position="stacked">Mot de passe*</ion-label>
                                           <ion-input
                                           type="password"
                                           formControlName="password"
                                           ></ion-input>
                          </ion-item>
                                     <div class="error-message">
                                                    <app-error-message
                                                          message="*Password must have a least of 1 uppercase,1 lowercase ,1 number and must have 8 characters"
                                                          [field]="newPassewordEmailForm.get('password')"
                                                          error="pattern"
                                                    ></app-error-message>
                                                   <app-error-message
                                                    message="*Password is mandatory"
                                                    [field]="newPassewordEmailForm.get('password')"
                                                    error="required"
                                                   ></app-error-message>
                                    </div>
            </ion-col>

            <ion-col size="12">
                              <ion-item>
                                      <ion-label class="password-input" position="stacked"
                                           >Confirmer le mot de passe*</ion-label>
                                                            
                                                     <ion-input
                                                              type="password"
                                                              formControlName="passwordConfirm"
                                                              class="password-input"
                                                     ></ion-input>
                              </ion-item>
                                       <div class="error-message">
                                                    <app-error-message
                                                            message="*Please to confirm your password"
                                                           [field]="newPassewordEmailForm.get('passwordConfirm')"
                                                           error="required"
                                                    ></app-error-message>
                                                     <span
                                                     class="sameValidator"
                                                     color="danger"
                                                    *ngIf="newPassewordEmailForm.hasError('passwordsNotEquals')"
                                                    >*The passwords are not the same
                                                    </span>
                                         </div>
          </ion-col>    
  </form>
                <ion-button>
                     <ion-text>confirmer</ion-text>
                                           </ion-button>
  </ion-row>
  </ion-grid>
</ion-content>


<!--dans le cas ou le lien est expiré-->
<!--<ng-template #secuCodeInvalid>
  <div class="new-password-page">
    <div class="container d-flex flex-column text-center">
      <h3 class="mb-3">Votre lien n'est pas valide</h3>
      <p>Votre lien n'est pas valide ou a expiré.</p>
      <button
      class="btn-sign-in mt-5"
      mat-raised-button
      color="primary"
      routerLink="/forgot-password"
      >
      Renvoyer un mail de récupération
      </button>
    </div>
  </div>
</ng-template>-->



<!--<ng-template #newPasswordDone>
  <div class="container d-flex flex-column">
    <h3 class="mb-3">Votre mot de passe a été réinitialisé</h3>
    <p>Votre nouveau mot de passe a bien été modifié. Veuillez prendre en compte celui-ci lors de votre prochaine connexion.</p>
    <div fxFlex fxLayoutAlign="center">
      <button
        class="btn-sign-in my-3"
        mat-raised-button
        color="success"
        routerLink="/login"
      >
        Connexion
      </button>
    </div>
  </div>
</ng-template>-->


